name: Node CI
on:
  pull_request:
    branches:
      - master
jobs:
  #   audit:
  #     runs-on: ubuntu-latest
  #     steps:
  #       - name: check out code
  #         uses: actions/checkout@v1
  #       - name: Read files
  #         uses: docker://dictybase/snapshot-upload:test
  #         env:
  #           GH_TOKEN: ${{ secrets.GH_TOKEN }}
  # - name: Audit live URL
  #   uses: docker://dictybase/lighthouse-audit:comment
  #   with:
  #     url: "https://eric.dictybase.dev/publication/26088819"
  #   env:
  #     GH_TOKEN: ${{ secrets.GH_TOKEN }}
  # - name: Upload results as an artifact
  #   uses: actions/upload-artifact@master
  #   with:
  #     name: report
  #     path: "./report"
  snapshots:
    # needs: build
    runs-on: ubuntu-18.04
    steps:
      - name: check out code
        uses: actions/checkout@v1
      - name: upload snapshots to minio
        uses: docker://dictybase/snapshot-upload:print
        with:
          args: "minio --folder reports"
        env:
          MINIO_ACCESS_KEY: ${{ secrets.MINIO_ACCESS_KEY }}
          MINIO_SECRET_KEY: ${{ secrets.MINIO_SECRET_KEY }}
